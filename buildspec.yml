version: 0.2

phases:
  install:
    commands:
      - echo "$(cat /etc/os-release)"
      - wget -q https://packages.microsoft.com/config/ubuntu/18.04/packages-microsoft-prod.deb
      - dpkg -i packages-microsoft-prod.deb
      - apt-get install apt-transport-https
      - apt-get -y update
      - apt-get install -y dotnet-sdk-2.2
  build:
    commands:
      - dotnet test ./src/HelloTests/HelloTests.csproj
      - dotnet publish -c release -o ./build_output ./src/HelloWorldWebCore/HelloWorldWebCore.csproj
artifacts:
  files:
    - src/HelloWorldWebCore/build_output/*
    - Dockerfile